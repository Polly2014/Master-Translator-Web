# 📸 预览功能界面说明

## 界面布局图解

### 1. 翻译完成后的下载面板

```
┌─────────────────────────────────────────────────────┐
│  ✅ Translation Complete                            │
│                                                     │
│  ┌───────────────────────────────────────────────┐ │
│  │  👁️  Preview Translation                     │ │  ← 新增的预览按钮（蓝色渐变）
│  └───────────────────────────────────────────────┘ │
│                                                     │
│  ┌───────────────────────────────────────────────┐ │
│  │  📥  Download Translation                    │ │  ← 原有的下载按钮（绿色渐变）
│  └───────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────┘
```

**说明**:
- 预览按钮在上方，使用蓝色渐变（from-blue-600 to-cyan-500）
- 下载按钮在下方，使用绿色渐变（from-green-600 to-emerald-500）
- 两个按钮都有 hover 动画效果和发光边框
- 按钮图标使用 Emoji（👁️ 和 📥）

---

### 2. 预览模态窗口（渲染视图）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  👁️ Translation Preview         [Raw Text] [Rendered]                    ❌  │  ← 头部
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  # Chapter 1: Introduction                                                  │  ← 内容区
│                                                                             │
│  This is the translated content with proper formatting.                     │
│                                                                             │
│  ## Section 1.1: Background                                                 │
│                                                                             │
│  - Point 1                                                                  │
│  - Point 2                                                                  │
│  - Point 3                                                                  │
│                                                                             │
│  > This is a quote block with blue left border.                            │
│                                                                             │
│                                                                             │  ← 可滚动区域
├─────────────────────────────────────────────────────────────────────────────┤
│  📊 1,234 words • 5,678 characters                           [📥 Download]  │  ← 底部栏
└─────────────────────────────────────────────────────────────────────────────┘
```

**说明**:
- **头部**:
  - 标题 "👁️ Translation Preview"
  - 视图切换按钮 "Raw Text" (灰色) 和 "Rendered" (蓝色高亮)
  - 右上角关闭按钮 ❌
- **内容区**:
  - 完整的 Markdown 渲染
  - 标题有不同大小和颜色
  - 列表有正确的缩进
  - 引用块有蓝色左边框
  - 支持滚动，使用自定义滚动条
- **底部栏**:
  - 左侧：统计信息（字数和字符数）
  - 右侧：下载按钮

---

### 3. 预览模态窗口（原始文本视图）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  👁️ Translation Preview         [Raw Text] [Rendered]                    ❌  │  ← 头部
├─────────────────────────────────────────────────────────────────────────────┤
│  # Chapter 1: Introduction                                                  │  ← 等宽字体
│                                                                             │
│  This is the translated content with proper formatting.                     │
│                                                                             │
│  ## Section 1.1: Background                                                 │
│                                                                             │
│  - Point 1                                                                  │
│  - Point 2                                                                  │
│  - Point 3                                                                  │
│                                                                             │
│  > This is a quote block with blue left border.                            │
│                                                                             │
│  ```python                                                                  │
│  def hello():                                                               │
│      print("Hello, World!")                                                 │
│  ```                                                                        │
│                                                                             │  ← 深色背景
├─────────────────────────────────────────────────────────────────────────────┤
│  📊 1,234 words • 5,678 characters                           [📥 Download]  │  ← 底部栏
└─────────────────────────────────────────────────────────────────────────────┘
```

**说明**:
- **头部**:
  - 视图切换按钮 "Raw Text" (蓝色高亮) 和 "Rendered" (灰色)
- **内容区**:
  - 显示原始 Markdown 代码
  - 等宽字体 (Courier New, monospace)
  - 深色背景 (bg-slate-900)
  - 保留所有 Markdown 语法标记
  - 支持滚动

---

## 交互流程图

### 完整用户流程

```
用户上传文件
    ↓
选择目标语言 (如: Japanese)
    ↓
点击 "Analyze Chunks"
    ↓
系统分析文档结构
    ↓
点击 "Start Translation"
    ↓
实时显示翻译进度
    ↓
翻译完成 (100%)
    ↓
下载面板显示两个按钮:
    ├─→ 点击 "Preview Translation" 👁️
    │       ↓
    │   预览窗口打开（默认渲染视图）
    │       ↓
    │   用户可以:
    │   ├─→ 查看渲染的格式化内容
    │   ├─→ 点击 "Raw Text" 切换到原始视图
    │   ├─→ 点击 "Rendered" 切换回渲染视图
    │   ├─→ 查看统计信息（字数、字符数）
    │   ├─→ 滚动查看完整内容
    │   ├─→ 点击模态框内的 "Download" 下载
    │   └─→ 关闭预览:
    │       ├─ 点击 ❌ 按钮
    │       ├─ 点击背景区域
    │       └─ 按 ESC 键
    │
    └─→ 点击 "Download Translation" 📥
            ↓
        直接下载文件到本地
```

---

## 视图对比

### 渲染视图 vs 原始文本视图

| 特性 | 渲染视图 (Rendered) | 原始文本视图 (Raw Text) |
|------|---------------------|------------------------|
| **字体** | 正文字体 (Inter/Sans-serif) | 等宽字体 (Courier New) |
| **背景** | 透明 | 深色 (bg-slate-900) |
| **标题** | 不同大小和颜色 | 显示 # 标记 |
| **列表** | 格式化显示 | 显示 - 标记 |
| **引用** | 蓝色左边框 + 斜体 | 显示 > 标记 |
| **代码** | 语法高亮背景 | 显示 ``` 标记 |
| **粗体** | 加粗显示 | 显示 ** 标记 |
| **斜体** | 倾斜显示 | 显示 * 标记 |
| **链接** | 蓝色下划线 | 显示 [text](url) |
| **适用场景** | 阅读和校对内容 | 检查 Markdown 语法 |

---

## 按钮状态

### 预览按钮状态

| 状态 | 外观 | 说明 |
|------|------|------|
| **默认** | 蓝色渐变，白色文字 | 翻译完成后可点击 |
| **Hover** | 更深的蓝色渐变 | 鼠标悬停时 |
| **Active** | 轻微下沉效果 | 点击时 |
| **禁用** | 不显示 | 翻译未完成时 |

### 视图切换按钮状态

| 按钮 | 未选中 | 选中 |
|------|--------|------|
| **Raw Text** | bg-slate-600 (灰色) | bg-blue-600 (蓝色) |
| **Rendered** | bg-slate-600 (灰色) | bg-blue-600 (蓝色) |

---

## 响应式设计

### 桌面视图 (>1024px)

```
┌───────────────────────────────────────────────────┐
│                                                   │
│         预览窗口 (最大宽度 5xl = 1024px)            │
│                                                   │
│  内容充分展示，左右有边距                           │
│                                                   │
└───────────────────────────────────────────────────┘
```

### 平板视图 (768px - 1024px)

```
┌─────────────────────────────────────────┐
│                                         │
│    预览窗口 (自动调整宽度)                │
│                                         │
│  内容适应屏幕，边距减小                  │
│                                         │
└─────────────────────────────────────────┘
```

### 移动视图 (<768px)

```
┌─────────────────────────┐
│                         │
│  预览窗口 (接近全屏)      │
│                         │
│  按钮堆叠显示            │
│  触摸友好的大小          │
│                         │
└─────────────────────────┘
```

---

## 颜色方案

### 主要颜色

| 元素 | 颜色 | Tailwind 类 | 用途 |
|------|------|------------|------|
| **预览按钮** | 蓝色渐变 | `from-blue-600 to-cyan-500` | 主操作按钮 |
| **下载按钮** | 绿色渐变 | `from-green-600 to-emerald-500` | 次要操作 |
| **模态背景** | 半透明黑 | `bg-black/70` | 覆盖层 |
| **窗口背景** | 深灰 | `bg-slate-800` | 主内容区 |
| **边框** | 中灰 | `border-slate-700` | 分隔线 |
| **文字** | 白色/浅灰 | `text-white`, `text-gray-300` | 主要文字 |
| **次要文字** | 中灰 | `text-gray-400` | 次要信息 |
| **标题** | 浅灰 | `text-gray-100`, `text-slate-200` | 标题文字 |
| **引用边框** | 蓝色 | `border-blue-500` | 引用块 |
| **代码背景** | 深灰 | `bg-slate-900` | 代码显示 |
| **链接** | 蓝色 | `text-blue-400` | 超链接 |

---

## 动画效果

### 模态窗口

| 动画 | 时长 | 效果 |
|------|------|------|
| **打开** | 300ms | 淡入 + 模糊效果 |
| **关闭** | 300ms | 淡出 |
| **背景** | 即时 | 半透明黑色覆盖 |

### 按钮

| 状态 | 动画 | 效果 |
|------|------|------|
| **Hover** | 200ms | 颜色加深 + 轻微放大 |
| **Click** | 100ms | 轻微下沉 |
| **切换** | 200ms | 颜色平滑过渡 |

### 滚动条

| 元素 | 样式 | 颜色 |
|------|------|------|
| **轨道** | 8px 宽 | `bg-slate-800` |
| **滑块** | 圆角 | `bg-slate-600` |
| **Hover** | 颜色加深 | `bg-slate-500` |

---

## 图标说明

| 图标 | 含义 | 位置 |
|------|------|------|
| 👁️ | 预览/查看 | 预览按钮、模态标题 |
| 📥 | 下载 | 下载按钮 |
| ❌ | 关闭 | 模态关闭按钮 |
| 📊 | 统计 | 统计信息前缀 |
| 🔄 | 加载中 | 内容加载状态 |

---

## 键盘快捷键

| 按键 | 功能 | 说明 |
|------|------|------|
| **ESC** | 关闭预览 | 任何时候按 ESC 都可关闭 |
| **Tab** | 焦点切换 | 在按钮间切换焦点 |
| **Enter** | 激活按钮 | 按钮获得焦点时按 Enter |
| **Space** | 激活按钮 | 按钮获得焦点时按空格 |

---

## 可访问性

### ARIA 标签

| 元素 | ARIA 属性 | 说明 |
|------|-----------|------|
| 预览按钮 | `aria-label="Preview translation"` | 屏幕阅读器支持 |
| 关闭按钮 | `aria-label="Close preview"` | 关闭功能说明 |
| 视图按钮 | `aria-pressed="true/false"` | 选中状态 |

### 键盘导航

- ✅ 所有按钮支持 Tab 键导航
- ✅ 支持 Enter/Space 键激活
- ✅ ESC 键快速关闭
- ✅ 焦点可见性清晰

---

## 浏览器开发者工具检查

### 元素 ID 列表

```javascript
// 主要元素
#previewBtn           // 预览按钮
#previewModal         // 预览模态框
#closePreviewBtn      // 关闭按钮
#previewRawBtn        // 原始视图按钮
#previewRenderedBtn   // 渲染视图按钮
#previewRawContent    // 原始文本内容区
#previewRenderedContent  // 渲染内容区
#previewStats         // 统计信息
#downloadFromPreview  // 模态内下载按钮
```

### CSS 类列表

```css
/* 自定义样式 */
.markdown-content     /* Markdown 渲染容器 */
.custom-scrollbar     /* 自定义滚动条 */
.gradient-text        /* 渐变文字 */
```

---

## 常见视觉问题排查

### 问题 1: 预览按钮不显示
**原因**: 翻译未完成或进度不是 100%  
**检查**: 查看下载面板是否显示

### 问题 2: 模态窗口显示异常
**原因**: CSS 冲突或 Tailwind 未加载  
**检查**: 浏览器控制台是否有错误

### 问题 3: Markdown 渲染不正确
**原因**: marked.js 未加载或内容格式问题  
**检查**: 控制台是否有 JS 错误，切换到原始视图检查

### 问题 4: 统计信息不准确
**原因**: 字符计数逻辑问题  
**检查**: 查看浏览器控制台的 `loadPreviewContent` 函数输出

### 问题 5: 滚动条不显示
**原因**: 内容未超出容器高度  
**检查**: 内容是否足够多，容器是否设置了最大高度

---

## 🎨 设计原则

### 一致性
- 与现有 UI 保持统一的深色主题
- 按钮样式和交互与其他按钮一致
- 使用相同的 Tailwind CSS 工具类

### 清晰性
- 预览按钮有明确的图标和文字
- 视图切换按钮状态清晰可见
- 统计信息简洁明了

### 响应性
- 所有操作都有即时反馈
- 动画平滑自然
- 加载状态有明确提示

### 可用性
- 多种关闭方式满足不同习惯
- 键盘导航完全支持
- 触摸友好的按钮大小

---

**📝 提示**: 如需实际截图，请按照本说明运行应用并截取相应界面。

**🔗 相关文档**:
- [预览功能使用指南](PREVIEW_FEATURE_GUIDE.md)
- [预览功能实施报告](PREVIEW_IMPLEMENTATION_REPORT.md)
- [预览功能演示指南](PREVIEW_DEMO_GUIDE.md)
